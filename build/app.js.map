{"version":3,"sources":["../src/app.js"],"names":["express","require","path","favicon","morgan","winston","cookieParser","bodyParser","routes","fantasyPl","app","env","process","NODE_ENV","locals","ENV","ENV_DEVELOPMENT","use","static","join","__dirname","set","get","req","res","render","stream","json","urlencoded","extended","next","err","Error","status","error","message","originalUrl","method","ip","title","module","exports"],"mappings":"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","file":"app.js","sourcesContent":["const express = require(\"express\");\nconst path = require(\"path\");\nconst favicon = require(\"serve-favicon\"); //    eslint-disable-line no-unused-vars\nconst morgan = require(\"morgan\");\nconst winston = require(\"./config/winston\");\nconst cookieParser = require(\"cookie-parser\");\nconst bodyParser = require(\"body-parser\");\n\nconst routes = require(\"./routes/index\");\nconst fantasyPl = require(\"./routes/fantasyPl\");\n\nconst app = express();\n\nconst env = process.env.NODE_ENV || \"development\";\napp.locals.ENV = env;\napp.locals.ENV_DEVELOPMENT = env == \"development\"; // eslint-disable-line eqeqeq\n\n// view engine setup\n\napp.use(express.static(path.join(__dirname, \"../public\")));\n\napp.set(\"views\", path.join(__dirname, \"../src/views\"));\napp.set(\"view engine\", \"pug\");\n\napp.get(\"/\", function(req, res) {\n  res.render(\"index\");\n});\n\n// app.use(favicon(__dirname + '/public/img/favicon.ico'));\napp.use(morgan(\"combined\", { stream: winston.stream }));\napp.use(bodyParser.json());\napp.use(\n  bodyParser.urlencoded({\n    extended: true\n  })\n);\napp.use(cookieParser());\n\napp.use(\"/\", routes);\napp.use(\"/fantasy\", fantasyPl);\n\n// / catch 404 and forward to error handler\napp.use((req, res, next) => {\n  const err = new Error(\"Not Found\");\n  err.status = 404;\n  next(err);\n});\n\n// / error handlers\n\n// development error handler\n// will print stacktrace\nif (app.get(\"env\") === \"development\") {\n  app.use((err, req, res, next) => {\n    //  eslint-disable-line no-unused-vars\n    winston.error(\n      `${err.status || 500} - ${err.message} - ${req.originalUrl} - ${\n        req.method\n      } - ${req.ip}`\n    );\n    res.status(err.status || 500);\n    res.render(\"error\", {\n      message: err.message,\n      error: err,\n      title: \"error\"\n    });\n  });\n}\n\n// production error handler\n// no stacktraces leaked to user\napp.use((err, req, res, next) => {\n  //   eslint-disable-line no-unused-vars\n\n  winston.error(\n    `${err.status || 500} - ${err.message} - ${req.originalUrl} - ${\n      req.method\n    } - ${req.ip}`\n  );\n  res.status(err.status || 500);\n  res.render(\"error\", {\n    message: err.message,\n    error: {},\n    title: \"error\"\n  });\n});\n\nmodule.exports = app;\n"]}