{"version":3,"sources":["../../src/tools/scraperTools.js"],"names":["tools","extractValues","tablerow","html","place","parseInt","children","eq","text","replace","name","find","id","extractId","team","value1","value2","value3","parseFloat","idRegex","url","extractUrl","exec","length","attr","isInDangerZone","player","filterDangerzonePlayers","players","filter","p"],"mappings":";;;;;AAAA,IAAMA,QAAQ;AACZC,iBAAe,uBAASC,QAAT,EAAmBC,IAAnB,EAAyB;AACtC,QAAMC,QAAQC,SACZF,KAAKD,QAAL,EACGI,QADH,CACY,IADZ,EAEGC,EAFH,CAEM,CAFN,EAGGC,IAHH,GAIGC,OAJH,CAIW,GAJX,EAIgB,EAJhB,CADY,EAMZ,EANY,CAAd;AAQA,QAAMC,OAAOP,KAAKD,QAAL,EACVI,QADU,CACD,IADC,EAEVC,EAFU,CAEP,CAFO,EAGVI,IAHU,CAGL,GAHK,EAIVJ,EAJU,CAIP,CAJO,EAKVC,IALU,EAAb;;AAOA,QAAMI,KAAK,KAAKC,SAAL,CAAeX,QAAf,EAAyBC,IAAzB,CAAX;;AAEA,QAAMW,OAAOX,KAAKD,QAAL,EACVI,QADU,CACD,IADC,EAEVC,EAFU,CAEP,CAFO,EAGVI,IAHU,CAGL,GAHK,EAIVJ,EAJU,CAIP,CAJO,EAKVC,IALU,EAAb;AAMA,QAAMO,SAASV,SACbF,KAAKD,QAAL,EACGI,QADH,CACY,IADZ,EAEGC,EAFH,CAEM,CAFN,EAGGC,IAHH,EADa,EAKb,EALa,CAAf;AAOA,QAAMQ,SAASX,SACbF,KAAKD,QAAL,EACGI,QADH,CACY,IADZ,EAEGC,EAFH,CAEM,CAFN,EAGGC,IAHH,EADa,EAKb,EALa,CAAf;AAOA,QAAMS,SAASC,WACbf,KAAKD,QAAL,EACGI,QADH,CACY,IADZ,EAEGC,EAFH,CAEM,CAFN,EAGGC,IAHH,GAIGC,OAJH,CAIW,GAJX,EAIgB,GAJhB,CADa,CAAf;;AAQA,WAAO;AACLL,kBADK;AAELM,gBAFK;AAGLI,gBAHK;AAILF,YAJK;AAKLG,oBALK;AAMLC,oBANK;AAOLC;AAPK,KAAP;AASD,GAxDW;AAyDZJ,aAAW,mBAASX,QAAT,EAAmBC,IAAnB,EAAyB;AAClC,QAAMgB,UAAU,mBAAhB;AACA,QAAMC,MAAM,KAAKC,UAAL,CAAgBnB,QAAhB,EAA0BC,IAA1B,CAAZ;AACA,QAAMS,KAAKO,QAAQG,IAAR,CAAaF,GAAb,CAAX;AACA,QAAIR,GAAGW,MAAH,GAAY,CAAhB,EAAmB,OAAOlB,SAASO,GAAG,CAAH,CAAT,EAAgB,EAAhB,CAAP;;AAEnB,WAAO,CAAC,CAAR;AACD,GAhEW;AAiEZS,cAAY,oBAASnB,QAAT,EAAmBC,IAAnB,EAAyB;AACnC,WAAOA,KAAKD,QAAL,EACJI,QADI,CACK,IADL,EAEJC,EAFI,CAED,CAFC,EAGJI,IAHI,CAGC,GAHD,EAIJa,IAJI,CAIC,MAJD,CAAP;AAKD,GAvEW;AAwEZC,kBAAgB,wBAASC,MAAT,EAAiB;AAC/B;AACA;AACA,QAAIA,OAAOX,MAAP,KAAkB,CAAlB,IAAwBW,OAAOX,MAAP,GAAgB,CAAhB,KAAsB,CAAtB,IAA2BW,OAAOX,MAAP,GAAgB,CAAvE,EAA2E;AACzE,aAAO,IAAP;AACD;AACD,WAAO,KAAP;AACD,GA/EW;AAgFZY,2BAAyB,iCAASC,OAAT,EAAkB;AACzC,WAAOA,QAAQC,MAAR,CAAe;AAAA,aAAK7B,MAAMyB,cAAN,CAAqBK,CAArB,CAAL;AAAA,KAAf,CAAP;AACD;AAlFW,CAAd;;kBAqFe9B,K","file":"scraperTools.js","sourcesContent":["const tools = {\n  extractValues: function(tablerow, html) {\n    const place = parseInt(\n      html(tablerow)\n        .children(\"td\")\n        .eq(0)\n        .text()\n        .replace(\".\", \"\"),\n      10\n    );\n    const name = html(tablerow)\n      .children(\"td\")\n      .eq(1)\n      .find(\"a\")\n      .eq(0)\n      .text();\n\n    const id = this.extractId(tablerow, html);\n\n    const team = html(tablerow)\n      .children(\"td\")\n      .eq(2)\n      .find(\"a\")\n      .eq(0)\n      .text();\n    const value1 = parseInt(\n      html(tablerow)\n        .children(\"td\")\n        .eq(3)\n        .text(),\n      10\n    );\n    const value2 = parseInt(\n      html(tablerow)\n        .children(\"td\")\n        .eq(4)\n        .text(),\n      10\n    );\n    const value3 = parseFloat(\n      html(tablerow)\n        .children(\"td\")\n        .eq(5)\n        .text()\n        .replace(\",\", \".\")\n    );\n\n    return {\n      place,\n      name,\n      team,\n      id,\n      value1,\n      value2,\n      value3\n    };\n  },\n  extractId: function(tablerow, html) {\n    const idRegex = /(personId=(\\d*))/g;\n    const url = this.extractUrl(tablerow, html);\n    const id = idRegex.exec(url);\n    if (id.length > 2) return parseInt(id[2], 10);\n\n    return -1;\n  },\n  extractUrl: function(tablerow, html) {\n    return html(tablerow)\n      .children(\"td\")\n      .eq(1)\n      .find(\"a\")\n      .attr(\"href\");\n  },\n  isInDangerZone: function(player) {\n    // https://www.fotball.no/globalassets/regler-og-retningslinjer/turneringsbestemmelser/turneringsbestemmelser-eliteserien.pdf\n    // https://www.fotball.no/globalassets/regler-og-retningslinjer/turneringsbestemmelser/turneringsbestemmelser-obos-ligaen.pdf\n    if (player.value1 === 3 || (player.value1 % 2 !== 0 && player.value1 > 2)) {\n      return true;\n    }\n    return false;\n  },\n  filterDangerzonePlayers: function(players) {\n    return players.filter(p => tools.isInDangerZone(p));\n  }\n};\n\nexport default tools;\n"]}